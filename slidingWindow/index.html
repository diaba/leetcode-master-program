<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Sliding Window Playground — Debug Report & Practice</title>

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">

</head>

<body>

    <header>
        <h1>Sliding Window Playground — Debug Report & Practice</h1>
        <div style="display:flex; gap:8px; align-items:center">
            <button class="btn secondary" onclick="showLeaderboardModal()">Leaderboard</button>
        </div>
    </header>

    <div class="container">
        <div class="grid">
            <aside class="sidebar">
                <div class="card-title">Controls</div>
                <div class="small">Presets</div>
                <div style="display:flex; gap:8px; margin:8px 0">
                    <button class="btn secondary" onclick="loadPreset('classic')">Classic</button>
                    <button class="btn secondary" onclick="loadPreset('peaks')">Peaks</button>
                    <button class="btn secondary" onclick="loadPreset('random')">Random</button>
                </div>

                <label>Array (comma separated)</label>
                <input id="inputArray" type="text" value="2,1,5,1,3,2" />
                <label>Window size (k)</label>
                <input id="inputK" type="number" value="3" min="1" />

                <div style="display:flex; gap:8px; margin-top:10px">
                    <button class="btn" onclick="startFixed()">Run Fixed</button>
                    <button class="btn secondary" onclick="startAnimatedFixed()">Animate</button>
                </div>

                <hr style="margin:12px 0; border-color:rgba(255,255,255,0.03)">

                <label>String (variable window)</label>
                <input id="inputString" type="text" value="abcabcbb" />
                <div style="display:flex; gap:8px; margin-top:10px">
                    <button class="btn" onclick="startVariable()">Run Variable</button>
                    <button class="btn secondary" onclick="startAnimatedVariable()">Animate</button>
                </div>

                <hr style="margin:12px 0; border-color:rgba(255,255,255,0.03)">

                <div class="card-title">Debugging</div>
                <div class="small">Open the debug quiz to practice spotting bugs</div>
                <div style="display:flex; gap:8px; margin-top:8px">
                    <button class="btn" onclick="openDebugQuiz()">Open Debug Quiz</button>
                    <button class="btn secondary" onclick="viewAttempts()">View Attempts</button>
                </div>

                <div style="margin-top:12px">
                    <div class="small">Export</div>
                    <div style="display:flex; gap:8px; margin-top:8px">
                        <button class="btn" onclick="exportDebugReport('md')">Export Report (Markdown)</button>
                        <button class="btn secondary" onclick="exportDebugReport('txt')">Export Report (TXT)</button>
                    </div>
                </div>

                <hr style="margin:12px 0; border-color:rgba(255,255,255,0.03)">

                <div class="card-title">Practice Builder</div>
                <div class="small">Generate more practice problems to ace debugging</div>
                <label>Number of problems</label>
                <input id="practiceCount" type="number" value="5" min="1" max="20" />
                <div style="display:flex; gap:8px; margin-top:8px">
                    <button class="btn" onclick="generatePractice()">Generate Practice</button>
                    <button class="btn secondary" onclick="downloadPractice()">Download Set</button>
                </div>

                <div style="margin-top:12px">
                    <button class="btn secondary" onclick="clearDebugHistory()">Clear Debug History</button>
                </div>
            </aside>

            <main class="main">
                <section class="panel">
                    <div style="display:flex; justify-content:space-between; align-items:center">
                        <div>
                            <div class="card-title">Simulators & Charts</div>
                            <div class="small">Visualize window movement and results</div>
                        </div>
                        <div style="display:flex; gap:8px; align-items:center">
                            <div class="badge">Fixed</div>
                            <div class="badge">Variable</div>
                            <div class="badge">Animated</div>
                        </div>
                    </div>

                    <div class="chart-wrap" style="margin-top:12px">
                        <div style="flex:1; min-width:320px"><canvas id="sumChart" height="220"></canvas></div>
                        <div style="width:360px"><canvas id="windowChart" height="220"></canvas></div>
                    </div>

                    <div id="simLog" class="small" style="margin-top:12px"></div>
                </section>
                <section class="panel" id="javaConceptsPractical" style="margin-top:14px;">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <div>
                            <div class="card-title">Java Concepts & Tools — Concise & Practical</div>
                            <div class="small">Four focused patterns, why they work, when to pick them, and paste‑ready
                                Java code.
                            </div>
                        </div>
                        <div style="display:flex; gap:8px; align-items:center;">
                            <button class="btn secondary" onclick="scrollToJavaPractical()">Jump</button>
                            <button class="btn" onclick="copyAllJavaPractical()">Copy All Java</button>
                        </div>
                    </div>

                    <div style="margin-top:12px; display:grid; gap:12px;">
                        <!-- 1. Deque (Monotonic Queue) -->
                        <div style="background:rgba(255,255,255,0.02); padding:12px; border-radius:8px;">
                            <h3 style="margin:0 0 8px 0;">1. Deque (Monotonic Queue)</h3>
                            <div class="small" style="margin-bottom:8px;">
                                <strong>Use</strong>: sliding-window maximum/minimum.
                                <strong>Core idea</strong>: keep indices in decreasing order of values; front = current
                                max.
                                <strong>Cost</strong>: amortized O(n).
                            </div>

                            <pre id="javaDequePractical"
                                style="background:#071028;padding:10px;border-radius:6px;color:#dbeafe;">
                    // Sliding window maximum (Java) — paste into a class and run
                    public static int[] maxSlidingWindow(int[] nums, int k) {
                        if (nums == null || k <= 0) return new int[0];
                        Deque<Integer> dq = new ArrayDeque<>();
                        int n = nums.length, out = 0;
                        int[] res = new int[n - k + 1];
                        for (int i = 0; i < n; i++) {
                            // remove smaller values from back
                            while (!dq.isEmpty() && nums[dq.peekLast()] <= nums[i]) dq.removeLast();
                            dq.addLast(i);
                            // remove indices outside window
                            if (dq.peekFirst() <= i - k) dq.removeFirst();
                            // record max when window is full
                            if (i >= k - 1) res[out++] = nums[dq.peekFirst()];
                        }
                        return res;
                    }
          </pre>

                            <div class="small" style="margin-top:8px;">
                                **Practical tip:** store indices (not values) so duplicates are handled correctly; test
                                with equal
                                elements.
                            </div>

                            <div style="display:flex; gap:8px; margin-top:8px;">
                                <button class="btn" onclick="copySnippet('javaDequePractical')">Copy snippet</button>
                            </div>
                        </div>

                        <!-- 2. Set/Map + Two Pointers -->
                        <div style="background:rgba(255,255,255,0.02); padding:12px; border-radius:8px;">
                            <h3 style="margin:0 0 8px 0;">2. Set or Map + Two Pointers</h3>
                            <div class="small" style="margin-bottom:8px;">
                                <strong>Use</strong>: uniqueness constraints (e.g., longest unique substring).
                                <strong>Core idea</strong>: expand right; when constraint breaks, move left until valid.
                                <strong>Map trick</strong>: store last index to jump left forward in one step.
                            </div>

                            <pre id="javaSetMapPractical"
                                style="background:#071028;padding:10px;border-radius:6px;color:#dbeafe;">
    // Longest substring without repeating characters (Java) — simple and robust
    public static int lengthOfLongestUnique(String s) {
        if (s == null || s.isEmpty()) return 0;
        Map<Character, Integer> last = new HashMap<>();
        int left = 0, maxLen = 0;
        for (int right = 0; right < s.length(); right++) {
            char c = s.charAt(right);
            if (last.containsKey(c)) {
                // jump left to one past previous index of c
                left = Math.max(left, last.get(c) + 1);
            }
            last.put(c, right);
            maxLen = Math.max(maxLen, right - left + 1);
        }
        return maxLen;
    }
          </pre>

                            <div class="small" style="margin-top:8px;">
                                **Practical tip:** use `Math.max(left, last.get(c)+1)` to avoid moving left backward
                                when duplicates
                                are
                                earlier.
                            </div>

                            <div style="display:flex; gap:8px; margin-top:8px;">
                                <button class="btn" onclick="copySnippet('javaSetMapPractical')">Copy snippet</button>
                            </div>
                        </div>

                        <!-- 3. Frequency Map + Variable-size Window -->
                        <div style="background:rgba(255,255,255,0.02); padding:12px; border-radius:8px;">
                            <h3 style="margin:0 0 8px 0;">3. Frequency Map + Variable‑Size Window</h3>
                            <div class="small" style="margin-bottom:8px;">
                                <strong>Use</strong>: content-based constraints (minimum window substring, count
                                anagrams).
                                <strong>Core idea</strong>: track required counts; expand right until satisfied; shrink
                                left to
                                minimize
                                while still valid.
                            </div>

                            <pre id="javaFreqPractical"
                                style="background:#071028;padding:10px;border-radius:6px;color:#dbeafe;">
    // Minimum window substring (Java) — practical implementation
    public static String minWindow(String s, String t) {
        if (s == null || t == null || s.length() < t.length()) return "";
        Map<Character, Integer> need = new HashMap<>();
        for (char c : t.toCharArray()) need.put(c, need.getOrDefault(c, 0) + 1);
        Map<Character, Integer> window = new HashMap<>();
        int required = need.size(), formed = 0;
        int left = 0, right = 0;
        int minLen = Integer.MAX_VALUE, minLeft = 0;
    
        while (right < s.length()) {
            char c = s.charAt(right++);
            window.put(c, window.getOrDefault(c, 0) + 1);
            if (need.containsKey(c) && window.get(c).intValue() == need.get(c).intValue()) {
                formed++;
            }
            while (left < right && formed == required) {
                if (right - left < minLen) {
                    minLen = right - left;
                    minLeft = left;
                }
                char d = s.charAt(left++);
                window.put(d, window.get(d) - 1);
                if (need.containsKey(d) && window.get(d) < need.get(d)) {
                    formed--;
                }
            }
        }
        return minLen == Integer.MAX_VALUE ? "" : s.substring(minLeft, minLeft + minLen);
    }
          </pre>

                            <div class="small" style="margin-top:8px;">
                                **Practical tip:** keep `need` and `window` separate; compare counts only for characters
                                in `need`
                                to
                                avoid extra work.
                            </div>

                            <div style="display:flex; gap:8px; margin-top:8px;">
                                <button class="btn" onclick="copySnippet('javaFreqPractical')">Copy snippet</button>
                            </div>
                        </div>

                        <!-- 4. Fixed-size Sliding Window -->
                        <div style="background:rgba(255,255,255,0.02); padding:12px; border-radius:8px;">
                            <h3 style="margin:0 0 8px 0;">4. Fixed‑Size Sliding Window — Add New, Subtract Old</h3>
                            <div class="small" style="margin-bottom:8px;">
                                <strong>Use</strong>: sums, averages, simple aggregates for constant window size.
                                <strong>Core idea</strong>: compute initial sum for first k elements; for each slide do
                                `sum += new
                                -
                                old`. Very fast and simple.
                            </div>

                            <pre id="javaFixedPractical"
                                style="background:#071028;padding:10px;border-radius:6px;color:#dbeafe;">
    // Max sum of subarray of size k (Java) — minimal and safe
    public static int maxSumK(int[] arr, int k) {
        if (arr == null || k <= 0 || arr.length < k) throw new IllegalArgumentException("Invalid input");
        int sum = 0;
        for (int i = 0; i < k; i++) sum += arr[i];
        int max = sum;
        for (int i = k; i < arr.length; i++) {
            sum += arr[i] - arr[i - k]; // add new, subtract old
            max = Math.max(max, sum);
        }
        return max;
    }
          </pre>

                            <div class="small" style="margin-top:8px;">
                                **Practical tip:** validate `k` first; test edge cases `k=1`, `k=arr.length`, and arrays
                                with
                                negatives.
                            </div>

                            <div style="display:flex; gap:8px; margin-top:8px;">
                                <button class="btn" onclick="copySnippet('javaFixedPractical')">Copy snippet</button>
                            </div>
                        </div>

                        <!-- Final concise checklist -->
                        <div style="background:rgba(255,255,255,0.01); padding:12px; border-radius:8px;">
                            <h4 style="margin:0 0 8px 0;">Concise Checklist</h4>
                            <ul class="small" style="margin:0 0 0 16px; padding:0;">
                                <li>Pick deque for window max/min; store indices, not values.</li>
                                <li>Use map+two-pointers to jump left when you know last seen index.</li>
                                <li>Use frequency maps for content constraints; only compare required chars.</li>
                                <li>For fixed windows, compute initial sum then update with add/subtract.</li>
                                <li>Always test boundary cases and off‑by‑one errors.</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section class="panel" id="quizPanel">
                    <div class="card-title">Quizzes</div>
                    <div class="small">Quick concept quiz and Debug-the-Code quiz</div>

                    <div style="display:flex; gap:8px; margin-top:12px">
                        <button class="btn" onclick="openQuiz()">Quick Concept Quiz</button>
                        <button class="btn" onclick="openDebugQuiz()">Debug the Code Quiz</button>
                    </div>

                    <div id="quizArea" style="margin-top:14px"></div>
                </section>

                <section class="panel">
                    <div class="card-title">Debug Report Preview</div>
                    <div class="small">A short summary of your debug attempts and tips</div>
                    <div id="reportPreview" class="report-area" style="margin-top:8px">No report yet. Run the Debug Quiz
                        and export a report to see a summary here.</div>
                </section>

                <section class="panel">
                    <div class="card-title">Practice Problems</div>
                    <div class="small">Generated practice problems appear below</div>
                    <div id="practiceList" class="practice-list"></div>
                </section>

                <footer>All data is stored locally in your browser. Exported reports are generated on demand.</footer>
            </main>
        </div>
    </div>

    <!-- Leaderboard Modal (kept minimal) -->
    <div id="leaderboardModal"
        style="display:none; position:fixed; inset:0; background:rgba(2,6,23,0.6); align-items:center; justify-content:center; z-index:9999;">
        <div
            style="width:520px; max-width:94%; background:linear-gradient(180deg,#071028,#0b1220); border-radius:12px; padding:18px; box-shadow:0 12px 40px rgba(0,0,0,0.6); color:#e6eef8;">
            <div style="display:flex; justify-content:space-between; align-items:center">
                <div><strong style="font-size:16px">Leaderboard — Top Scores</strong>
                    <div class="small">Saved locally</div>
                </div>
                <div style="display:flex; gap:8px; align-items:center">
                    <button class="btn secondary" onclick="closeLeaderboardModal()">Close</button>
                </div>
            </div>
            <div style="margin-top:12px">
                <div id="leaderboardBody" class="small">No leaderboard integration in this build.</div>
            </div>
        </div>
    </div>


    <script src="script.js">
    </script>

</body>

</html>